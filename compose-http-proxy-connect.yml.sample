services:
  clash: 
    build:
      context: .
      dockerfile: Dockerfile-http-proxy-connect
    restart: unless-stopped
    volumes:
      - ${PWD}/config.yaml:/root/.config/clash/config.yaml
      - ${PWD}/nginx-http-proxy.conf:/etc/nginx/nginx.conf
      - /path/to/certs:/etc/nginx/certs:ro
    ports:
      - "127.0.0.1:9987:7890"  # mix port (http/socks5)
      - "9988:3128"  # ngx_proxy_connect
      - "127.0.0.1:9989:8080"  # web ui
